The following views must be added after bundle exec rake db:migrate

alter view ordered_records as
select mr.*,cast((mr.id + (cast(mt.PercentageID as SIGNED) * 1000)) as SIGNED) as 'rank' from milestone_records mr inner join milestone_tasks mt on mr.milestone_tasks_id = mt.id
where mr.id not in (select id from record_parents)
union all
select * from record_parents

alter view record_parents as
select mr2.*, cast(((mr.id + (cast(mt2.PercentageID as SIGNED) * 1000)) + 1) as SIGNED) as 'rank' from milestone_records mr inner join milestone_tasks mt on mr.milestone_tasks_id = mt.id 
inner join milestone_records mr2 on mt.ParentMilestoneTaskID = mr2.milestone_tasks_id and mr2.jobs_id = mr.jobs_id inner join milestone_tasks mt2 on mr2.milestone_tasks_id = mt2.id


alter table milestone_records change date_completed date_completed varchar(100) null;

insert into roles (name,created_at,updated_at) values ('SuperAdmin',now(),now())
insert into roles (name,created_at,updated_at) values ('Manager',now(),now())
insert into roles (name,created_at,updated_at) values ('DataEntry',now(),now())

insert into roles_users values (1,1)

alter table job_scope_additions add column amount_billable decimal(10,2) null

#above is to give the first user created admin access
